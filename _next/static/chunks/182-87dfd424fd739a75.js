"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[182],{5182:function(e,t,n){n.d(t,{Z:function(){return j}});var s=n(5893),r=n(1163),i=n(7294),l=n(8963),a=n(1664),o=n.n(a),d=n(3999),c=n(6727),m=n(3342),u=n(782),x=n(3854),h=n(5934),p=n(7536);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){f(e,t,n[t])}))}return e}function g(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var t=(0,r.useRouter)(),n=(0,p.cI)(),a=n.register,f=n.handleSubmit,g=(n.watch,n.formState.errors),j=(0,l.b)(),v=j.account,y=j.balance,N=j.contract,w=String(Date.now()+864e5),k=(0,i.useState)({id:"",prompt:"",contestants:[],participants:[],deadline:w}),C=k[0],S=k[1],T=(0,i.useState)(!1),O=T[0],q=T[1],I=(0,i.useState)(!1),P=I[0],D=I[1],F=(0,i.useState)({name:"",votes:0,img:""}),R=F[0],V=(F[1],(0,i.useState)({name:"",votes:0,img:""})),E=V[0];V[1];return(0,i.useEffect)((function(){}),[g]),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(o(),{href:"/",passHref:!0,children:(0,s.jsx)("h2",{className:"font-bold cursor-pointer",children:"This-OR-That"})}),(null===v||void 0===v?void 0:v.accountId)?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{className:"bg-secondary px-6 py-2 rounded-md font-bold",onClick:function(){q(!0)},children:"Create Poll"}),(0,s.jsx)(c.Vq,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:function(){q(!1)},open:O,children:(0,s.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[(0,s.jsx)(c.Vq.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40"}),(0,s.jsx)("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"\u200b"}),(0,s.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[(0,s.jsx)(c.Vq.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Create a poll"}),(0,s.jsxs)("form",{onSubmit:f((function(e){D(!0),S(b({},C,{prompt:e.prompt,deadline:String(Date.parse(e.deadline)),contestants:[{name:e.name1,votes:0,img:e.imgurl1},{name:e.name2,votes:0,img:e.imgurl2}]})),N.setPoll({poll:b({},C,{prompt:e.prompt,deadline:String(Date.parse(e.deadline)),contestants:[{name:e.name1,votes:0,img:e.imgurl1},{name:e.name2,votes:0,img:e.imgurl2}]},{id:(0,h.Z)()})}).then((function(){(0,u.Am)((0,s.jsx)(x.RT,{text:"Poll Created successfully."})),D(!1),"/"!==t.pathname?t.push("/"):t.reload()})).catch((function(e){D(!1),console.log(e),(0,u.Am)((0,s.jsx)(x.ZN,{text:"Failed to create poll"}))}))})),children:[(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Fill in the details of your poll"}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"prompt",className:"text-sm font-semibold",children:"Prompt "}),(0,s.jsx)("input",b({type:"text",id:"prompt",className:"w-full my-2 border border-gray-500 rounded-md p-2"},a("prompt",{required:!0}),{defaultValue:C.prompt})),g.prompt&&(0,s.jsx)("span",{className:"text-sm text-red-400 font-light",children:"This field is required"})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"name1",className:"text-sm font-semibold",children:"Name (Contestant 1) "}),(0,s.jsx)("input",b({type:"text",id:"name1",className:"w-full my-2 border border-gray-500 rounded-md p-2"},a("name1",{required:!0}),{defaultValue:R.name})),g.name1&&(0,s.jsx)("span",{className:"text-sm text-red-400 font-light",children:"This field is required"})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"imgurl1",className:"text-sm font-semibold",children:"Image URL (Contestant 1) "}),(0,s.jsx)("input",b({type:"text",id:"imgurl1",className:"w-full my-2 border border-gray-500 rounded-md p-2"},a("imgurl1",{required:!0}),{defaultValue:R.img})),g.imgurl1&&(0,s.jsx)("span",{className:"text-sm text-red-400 font-light",children:"This field is required"})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"name2",className:"text-sm font-semibold",children:"Name (Contestant 2) "}),(0,s.jsx)("input",b({type:"text",id:"name2",className:"w-full my-2 border border-gray-500 rounded-md p-2"},a("name2",{required:!0}),{defaultValue:E.name})),g.name2&&(0,s.jsx)("span",{className:"text-sm text-red-400 font-light",children:"This field is required"})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{htmlFor:"imgurl2",className:"text-sm font-semibold",children:"Image URL (Contestant 2) "}),(0,s.jsx)("input",b({type:"text",id:"imgurl2",className:"w-full my-2 border border-gray-500 rounded-md p-2"},a("imgurl2",{required:!0}),{defaultValue:E.img})),g.imgurl2&&(0,s.jsx)("span",{className:"text-sm text-red-400 font-light",children:"This field is required"})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("label",{className:"text-sm font-semibold",htmlFor:"deadline",children:"Deadline (date and time):"}),(0,s.jsx)("input",b({type:"datetime-local",id:"deadline",className:"w-full my-2 border border-gray-500 rounded-md p-2"},a("deadline",{required:!0,validate:function(e){return new Date(e).getTime()>=Number(w)-18e6}}),{defaultValue:new Date(Number(C.deadline)).toISOString().replace("Z","")})),g.deadline&&(0,s.jsx)("span",{className:"text-sm text-red-400 font-light",children:"This deadline should be at least 24 hours from now "})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("button",{type:"submit",disabled:P,className:"inline-flex w-full justify-center px-4 py-4 text-sm font-medium text-white bg-secondary bg-opacity-70 border border-transparent rounded-md hover:bg-opacity-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",children:P?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{margin:"auto",background:"transparent",display:"block"},width:"30px",height:"30px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:(0,s.jsx)("circle",{cx:"50",cy:"50",r:"32",strokeWidth:"8",stroke:"#85a2b6",strokeDasharray:"50.26548245743669 50.26548245743669",fill:"none",strokeLinecap:"round",children:(0,s.jsx)("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1s",keyTimes:"0;1",values:"0 50 50;360 50 50"})})}):"Create Poll"})})]})]})]})}),(0,s.jsx)("div",{className:"w-40 text-right top-16",children:(0,s.jsxs)(c.v2,{as:"div",className:"relative inline-block text-left",children:[(0,s.jsx)("div",{children:(0,s.jsxs)(c.v2.Button,{className:"inline-flex justify-center w-full px-4 py-2 text-sm font-medium text-white bg-black rounded-md bg-opacity-20 hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75",children:["NEAR ",y,(0,s.jsx)(m.Z,{className:"w-5 h-5 ml-2 -mr-1 text-violet-200 hover:text-violet-100","aria-hidden":"true"})]})}),(0,s.jsx)(c.v2.Items,{className:"absolute right-0 w-56 mt-4 origin-top-right bg-white divide-y divide-gray-100 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,s.jsxs)("div",{className:"px-1 py-1 ",children:[(0,s.jsx)(c.v2.Item,{children:function(e){var t=e.active;return(0,s.jsx)("a",{href:"https://explorer.testnet.near.org/accounts/".concat(null===v||void 0===v?void 0:v.accountId),target:"_blank",rel:"noreferrer",children:(0,s.jsx)("button",{className:"".concat(t?"bg-secondary text-white":"text-gray-900"," group flex rounded-md items-center w-full px-2 py-2 text-sm"),children:null===v||void 0===v?void 0:v.accountId})})}}),(0,s.jsx)(c.v2.Item,{children:function(e){var t=e.active;return(0,s.jsx)("button",{onClick:d.kS,className:"".concat(t?"bg-secondary text-white":"text-gray-900"," group flex rounded-md items-center w-full px-2 py-2 text-sm"),children:"Disconnect"})}})]})})]})})]}):(0,s.jsx)("button",{className:"bg-secondary px-6 py-2 rounded-md font-bold",onClick:d.x4,children:"connect wallet"})]})}function j(e){var t=e.children,n=(0,r.useRouter)();(0,l.b)().account;return(0,i.useLayoutEffect)((function(){window.walletConnection.account().accountId||n.push("/")}),[n]),(0,s.jsxs)("div",{className:"bg-primary min-h-screen p-6 text-white ",children:[(0,s.jsx)(g,{}),(0,s.jsx)(x.P_,{}),t]})}},3854:function(e,t,n){n.d(t,{P_:function(){return i},RT:function(){return l},ZN:function(){return a}});var s=n(5893),r=(n(7294),n(782)),i=(n(4213),function(){return(0,s.jsx)(r.Ix,{position:"top-center",autoClose:5e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!1,pauseOnHover:!0})}),l=function(e){var t=e.text;return(0,s.jsxs)("div",{children:[(0,s.jsx)("i",{className:"bi bi-check-circle-fill text-green-400 mx-2"}),(0,s.jsx)("span",{className:"text-secondary mx-1",children:t})]})},a=function(e){var t=e.text;return(0,s.jsxs)("div",{children:[(0,s.jsx)("i",{className:"bi bi-x-circle-fill text-red-400 mx-2"}),(0,s.jsx)("span",{className:"text-secondary mx-1",children:t})]})}}}]);